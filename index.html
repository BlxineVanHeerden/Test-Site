<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Invoice Generator</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

<style>
body { font-family: Arial, sans-serif; background:#f4f4f4; margin:20px; }
.section { background:#fff; padding:15px; margin-bottom:20px; border-radius:4px; }
h1,h3 { margin-top:0 }
input, select { width:100%; padding:8px; margin:5px 0; }
button { padding:8px 12px; background:#222; color:#fff; border:none; cursor:pointer; }
button:hover { background:#555; }
table { width:100%; border-collapse:collapse; }
th,td { border:1px solid #ccc; padding:8px; }
th { background:#222; color:#fff; }
.score { font-weight:bold; }
.good { color:green }
.warn { color:orange }
.bad { color:red }
.clientView .internal { display:none }
iframe { width:100%; height:600px; border:1px solid #ccc }
.small { font-size: 13px; color:#555 }
</style>
</head>

<body>

<h1>Smart Invoice Generator</h1>

<div class="section">
<strong>Invoice #:</strong> <span id="invoiceNumber">001</span><br>
<strong>Date:</strong> <span id="invoiceDate"></span>
</div>

<div class="section">
<h3>Your Info</h3>
<input id="yourName" placeholder="Business Name">
<input id="yourEmail" placeholder="Email">
</div>

<div class="section">
<h3>Client Info</h3>
<input id="clientName" placeholder="Client Name">
<input id="clientEmail" placeholder="Client Email">
</div>

<div class="section">
<h3>Currency</h3>
<select id="currencySelect">
  <option value="USD" data-symbol="$" data-flag="ðŸ‡ºðŸ‡¸" data-rate="1">ðŸ‡ºðŸ‡¸ USD â€“ US Dollar</option>
  <option value="EUR" data-symbol="â‚¬" data-flag="ðŸ‡ªðŸ‡º" data-rate="1.08">ðŸ‡ªðŸ‡º EUR â€“ Euro</option>
  <option value="GBP" data-symbol="Â£" data-flag="ðŸ‡¬ðŸ‡§" data-rate="1.27">ðŸ‡¬ðŸ‡§ GBP â€“ Pound</option>
  <option value="CAD" data-symbol="$" data-flag="ðŸ‡¨ðŸ‡¦" data-rate="0.74">ðŸ‡¨ðŸ‡¦ CAD â€“ Dollar</option>
  <option value="AUD" data-symbol="$" data-flag="ðŸ‡¦ðŸ‡º" data-rate="0.66">ðŸ‡¦ðŸ‡º AUD â€“ Dollar</option>
  <option value="NGN" data-symbol="â‚¦" data-flag="ðŸ‡³ðŸ‡¬" data-rate="0.00066">ðŸ‡³ðŸ‡¬ NGN â€“ Naira</option>
</select>

<p>
<span id="currencyFlag">ðŸ‡ºðŸ‡¸</span>
<strong id="currencyCode">USD</strong>
</p>

<p class="small" id="exchangePreview"></p>
<p class="small" id="taxHint"></p>
</div>

<div class="section">
<h3>Invoice Items (Phase | Item | Qty | Price)</h3>
<table>
<thead>
<tr>
<th>Phase</th><th>Item</th><th>Qty</th><th>Price</th><th>Total</th><th></th>
</tr>
</thead>
<tbody id="itemsBody">
<tr>
<td><input value="Phase 1"></td>
<td><input value="Web Design"></td>
<td><input type="number" value="1"></td>
<td><input type="number" value="500"></td>
<td class="lineTotal">$500.00</td>
<td><button onclick="removeRow(this)">âœ•</button></td>
</tr>
</tbody>
</table>
<button onclick="addRow()">+ Add Item</button>
</div>

<div class="section">
<h3>Totals</h3>
<label>Tax %</label>
<input id="taxRate" type="number" value="0">
<p>Subtotal: <strong id="subtotal">$0.00</strong></p>
<p>Tax: <strong id="taxAmount">$0.00</strong></p>
<p>Total: <strong id="grandTotal">$0.00</strong></p>
</div>

<div class="section internal">
<h3>Insights</h3>
<p>Invoice Health: <span id="healthScore" class="score"></span></p>
<p>Payment Friction: <span id="frictionScore" class="score"></span></p>
<p>Readability: <span id="readabilityScore" class="score"></span></p>
<p>Dispute Risk: <span id="disputeScore" class="score"></span></p>
<div id="tips"></div>
</div>

<div class="section">
<button onclick="toggleClientView()">Toggle Client View</button>
<button onclick="generateInvoice()">Preview PDF</button>
</div>

<iframe id="invoicePreview"></iframe>

<script src="script.js"></script>
</body>
</html>
