<!-- Only the plan container and JS snippet changed; everything else stays the same -->

<div class="row" id="planContainer">
  <div class="plan-card" data-plan="free">
    <h3>Free</h3>
    <div class="plan-price">$0</div>
    <div class="plan-features">
      <div>Max 2 items</div>
      <div>Basic invoice</div>
      <div>Manual share</div>
    </div>
  </div>
  <div class="plan-card" data-plan="basic">
    <h3>Basic</h3>
    <div class="plan-price">$5/mo</div> <!-- Increased by $2 -->
    <div class="plan-features">
      <div>Max 10 items</div>
      <div>PDF download</div>
      <div>Email notifications</div>
    </div>
  </div>
  <div class="plan-card" data-plan="pro">
    <h3>Pro</h3>
    <div class="plan-price">$10/mo</div> <!-- Increased by $2 -->
    <div class="plan-features">
      <div>Unlimited items</div>
      <div>Custom branding</div>
      <div>Automated reminders</div>
    </div>
  </div>
  <div class="plan-card" data-plan="enterprise">
    <h3>Enterprise</h3>
    <div class="plan-price">$20/mo</div>
    <div class="plan-features">
      <div>Team accounts</div>
      <div>Advanced analytics</div>
      <div>Priority support</div>
    </div>
  </div>
</div>

<script>
// ----- Plan logic -----
const planButtons = document.querySelectorAll('.plan-card');
let selectedPlan = 'free';

planButtons.forEach(card => {
  card.addEventListener('click', () => {
    selectedPlan = card.getAttribute('data-plan');
    planButtons.forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    updateFeatureAccess();
  });
});

function updateFeatureAccess() {
  // Unlock buttons for demo purposes
  document.getElementById('pdfBtn').classList.add('unlocked');
  document.getElementById('sendBtn').classList.add('unlocked');
  document.getElementById('saveBtn').classList.add('unlocked');
}

// ----- Invoice logic -----
function updatePreview() {
  const cur = document.getElementById("currency").value;
  let subtotal = 0;
  const rows = items.map(i => {
    const t = i.qty * i.price;
    subtotal += t;
    return `<tr>
      <td>${i.name || "-"}</td>
      <td>${i.cat || ""}</td>
      <td>${i.qty}</td>
      <td>${cur}${t.toFixed(2)}</td>
    </tr>`;
  }).join("");

  const disc = subtotal * (document.getElementById("discount").value / 100);
  const taxAmt = subtotal * (document.getElementById("tax").value / 100);
  const total = subtotal - disc + taxAmt;
  const balance = total - document.getElementById("paid").value;

  const due = new Date(dueDate.value);
  const overdue = balance > 0 && new Date() > due;

  let badge = "grey", text = document.getElementById("status").value;
  if (text === "Paid") badge = "green";
  if (text === "Sent") badge = "blue";
  if (overdue) { badge = "red"; text = "Overdue"; }

  document.getElementById("preview").srcdoc = `
  <div style="font-family:Inter;padding:32px;background:#fff;border-radius:12px;">
    <h2>${docType.value}${invoiceNumber.value}</h2>
    <span class="badge ${badge}">${text}</span>
    <table style="width:100%;margin-top:16px;border-collapse:collapse;">
      <thead>
        <tr><th>Item</th><th>Category</th><th>Qty</th><th>Amount</th></tr>
      </thead>
      <tbody>${rows}</tbody>
      <tfoot>
        <tr><td colspan="3">Subtotal</td><td>${cur}${subtotal.toFixed(2)}</td></tr>
        <tr><td colspan="3">Discount</td><td>${cur}${disc.toFixed(2)}</td></tr>
        <tr><td colspan="3">Tax</td><td>${cur}${taxAmt.toFixed(2)}</td></tr>
        <tr><td colspan="3"><strong>Total</strong></td><td><strong>${cur}${total.toFixed(2)}</strong></td></tr>
        <tr><td colspan="3">Amount Paid</td><td>${cur}${document.getElementById("paid").value}</td></tr>
        <tr><td colspan="3">Balance Due</td><td>${cur}${balance.toFixed(2)}</td></tr>
      </tfoot>
    </table>
  </div>`;
}

// Connect Preview button
document.querySelector("button[onclick='updatePreview()']").addEventListener("click", updatePreview);

// Optional: unlock all premium buttons for demo
["pdfBtn","sendBtn","saveBtn"].forEach(id=>{
  document.getElementById(id).addEventListener("click", ()=>{
    alert(id.replace("Btn","") + " action triggered!");
  });
});

// Trigger initial preview
updatePreview();
</script>
