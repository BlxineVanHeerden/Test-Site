<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Invoice Generator - Plans</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:Inter,sans-serif;background:#f5f7fb;padding:20px;color:#1f2937;}
h1{text-align:center;font-weight:700;}
.section{background:#fff;padding:20px;border-radius:16px;margin-bottom:24px;box-shadow:0 10px 25px rgba(0,0,0,.06);}
.row{display:flex;gap:16px;flex-wrap:wrap}
.row>div{flex:1;min-width:200px}
button{padding:10px;border-radius:8px;border:none;background:#3b82f6;color:#fff;font-weight:600;cursor:pointer}
button:hover{background:#2563eb}
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #e5e7eb}
.plan-card{border:1px solid #d1d5db;border-radius:16px;padding:20px;flex:1;text-align:center;cursor:pointer;transition:.3s}
.plan-card:hover{transform:translateY(-4px);box-shadow:0 12px 24px rgba(0,0,0,.12)}
.plan-card.selected{border-color:#3b82f6;box-shadow:0 12px 28px rgba(59,130,246,.2)}
.plan-price{font-size:22px;font-weight:700;margin:10px 0}
.paypal-btn-container{max-width:220px;margin:16px auto;display:none}
</style>
</head>

<body>

<h1>Smart Invoice Generator</h1>

<h2>Select a Plan</h2>
<div class="row" id="planContainer">
  <div class="plan-card" data-plan="free">
    <h3>Free</h3>
    <div class="plan-price">$0</div>
    <p>Max 2 items<br>Preview only</p>
  </div>
  <div class="plan-card" data-plan="basic">
    <h3>Basic</h3>
    <div class="plan-price">$5 / mo</div>
    <p>Max 5 items<br>PDF Download</p>
  </div>
  <div class="plan-card" data-plan="pro">
    <h3>Pro</h3>
    <div class="plan-price">$10 / mo</div>
    <p>Unlimited items<br>Automation</p>
  </div>
</div>

<!-- PayPal Button UNDER plans -->
<div class="paypal-btn-container" id="paypalBtnContainer"></div>

<div class="section">
  <h3>Invoice Items</h3>
  <table>
    <thead>
      <tr><th>Item</th><th>Qty</th><th>Price</th></tr>
    </thead>
    <tbody id="itemsBody"></tbody>
  </table>
  <button id="addItemBtn">Add Item</button>
</div>

<iframe id="preview" style="width:100%;height:400px;border:none;border-radius:16px"></iframe>

<!-- PayPal SDK (NO CARD / DEBIT) -->
<script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD&disable-funding=card,credit"></script>

<script>
/* ---------------- PLANS ---------------- */
const planCards=document.querySelectorAll('.plan-card');
let selectedPlan='free';

planCards.forEach(card=>{
  card.addEventListener('click',()=>{
    selectedPlan=card.dataset.plan;
    planCards.forEach(c=>c.classList.remove('selected'));
    card.classList.add('selected');
    updatePayPalVisibility();
  });
});

function updatePayPalVisibility(){
  const box=document.getElementById('paypalBtnContainer');
  box.style.display = selectedPlan === 'free' ? 'none' : 'block';
}

/* ---------------- ITEMS ---------------- */
let items=[];
const body=document.getElementById('itemsBody');

function addItem(){
  const limit = selectedPlan==='free'?2:selectedPlan==='basic'?5:999;
  if(items.length>=limit){alert('Item limit reached');return;}

  const i={name:'Item',qty:1,price:0};
  items.push(i);

  const tr=document.createElement('tr');
  tr.innerHTML=`
    <td><input value="${i.name}"></td>
    <td><input type="number" value="1" min="1"></td>
    <td><input type="number" value="0" min="0"></td>
  `;
  const inputs=tr.querySelectorAll('input');
  inputs[0].oninput=e=>i.name=e.target.value;
  inputs[1].oninput=e=>i.qty=+e.target.value;
  inputs[2].oninput=e=>i.price=+e.target.value;

  body.appendChild(tr);
}
document.getElementById('addItemBtn').onclick=addItem;
addItem();

/* ---------------- PAYPAL ---------------- */
paypal.Buttons({
  style:{
    layout:'vertical',
    color:'blue',
    shape:'pill',
    label:'paypal',
    height:32
  },
  createOrder:(data,actions)=>{
    const total=items.reduce((s,i)=>s+i.qty*i.price,0);
    return actions.order.create({
      purchase_units:[{amount:{value:total.toFixed(2)}}]
    });
  },
  onApprove:(data,actions)=>{
    return actions.order.capture().then(d=>{
      alert('Payment completed by '+d.payer.name.given_name);
    });
  }
}).render('#paypalBtnContainer');
</script>

</body>
</html>
