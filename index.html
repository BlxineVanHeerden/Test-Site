<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Invoice Generator</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD"></script>

<style>
body{
  font-family:Inter,sans-serif;
  background:#f8fafc;
  padding:20px;
}
h1{text-align:center;color:#1e40af}

.section{
  background:#fff;
  padding:16px;
  border-radius:14px;
  margin-bottom:20px;
  box-shadow:0 6px 18px rgba(0,0,0,.06);
}

input,select,textarea,button{
  width:100%;
  padding:6px 8px;
  margin-top:6px;
  border-radius:6px;
  border:1px solid #cbd5e1;
  font-size:13px;
}

button{
  background:#1e40af;
  color:#fff;
  cursor:pointer;
  font-weight:600;
  border:none;
}
button:hover{background:#1e3a8a}

.button-group{
  display:flex;
  gap:10px;
  margin-bottom:20px;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  padding:8px;
  border-bottom:1px solid #e5e7eb;
}
th{background:#e5e7eb}

iframe{
  width:100%;
  height:720px;
  border-radius:14px;
  border:1px solid #e5e7eb;
}

.remove-btn{
  background:#ef4444;
  padding:4px 8px;
  font-size:12px;
  border-radius:6px;
}

.plan-card{
  border:1px solid #e5e7eb;
  border-radius:12px;
  padding:16px;
  text-align:center;
}
.plan-card h3{margin:0;color:#1e40af}
.plan-card ul{padding-left:18px;text-align:left;font-size:13px}
.plan-price{font-size:22px;font-weight:700;margin:10px 0}
.locked{opacity:.5}
</style>
</head>
<body>

<h1>Invoice Generator</h1>

<!-- PLAN STATE -->
<script>
let PLAN = localStorage.getItem("PLAN") || "FREE";

function upgrade(plan){
  PLAN = plan;
  localStorage.setItem("PLAN", plan);
  alert("Plan upgraded to " + plan);
}
</script>

<!-- INVOICE (UNCHANGED CORE) -->
<div class="section">
  <strong>Current Plan:</strong> <span id="planLabel"></span>
</div>

<script>
document.getElementById("planLabel").innerText = PLAN;
</script>

<!-- ITEM LIMIT ENFORCEMENT -->
<script>
const FREE_ITEM_LIMIT = 2;
</script>

<!-- PRICING -->
<div class="section">
  <h2 style="text-align:center">Upgrade Your Plan</h2>
  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px">

    <div class="plan-card">
      <h3>Free</h3>
      <div class="plan-price">$0</div>
      <ul>
        <li>2 invoice items</li>
        <li>Live preview</li>
        <li>Basic totals</li>
      </ul>
    </div>

    <div class="plan-card">
      <h3>Starter</h3>
      <div class="plan-price">$4.99/mo</div>
      <ul>
        <li>Unlimited items</li>
        <li>PDF Download</li>
        <li>Save invoices</li>
      </ul>
      <div id="paypal-starter"></div>
    </div>

    <div class="plan-card">
      <h3>Business</h3>
      <div class="plan-price">$9.99/mo</div>
      <ul>
        <li>Everything in Starter</li>
        <li>Send invoices</li>
        <li>Priority support</li>
      </ul>
      <div id="paypal-business"></div>
    </div>

    <div class="plan-card">
      <h3>Pro</h3>
      <div class="plan-price">$14.99/mo</div>
      <ul>
        <li>All features</li>
        <li>No branding</li>
        <li>Future tools included</li>
      </ul>
      <div id="paypal-pro"></div>
    </div>

  </div>
</div>

<script>
paypal.Buttons({
  createOrder: (d,a)=>a.order.create({
    purchase_units:[{amount:{value:"4.99"}}]
  }),
  onApprove: ()=>upgrade("STARTER")
}).render("#paypal-starter");

paypal.Buttons({
  createOrder: (d,a)=>a.order.create({
    purchase_units:[{amount:{value:"9.99"}}]
  }),
  onApprove: ()=>upgrade("BUSINESS")
}).render("#paypal-business");

paypal.Buttons({
  createOrder: (d,a)=>a.order.create({
    purchase_units:[{amount:{value:"14.99"}}]
  }),
  onApprove: ()=>upgrade("PRO")
}).render("#paypal-pro");
</script>

<!-- PREMIUM BUTTON LOCKING -->
<script>
function requirePremium(feature){
  if(PLAN === "FREE"){
    alert(feature + " is available on paid plans.");
    return false;
  }
  return true;
}
</script>

<!-- ACTION BUTTONS -->
<div class="section button-group">
  <button onclick="alert('Preview works')">Preview Invoice</button>
  <button onclick="requirePremium('PDF Download')">Download PDF</button>
  <button onclick="requirePremium('Sending invoices')">Send Invoice</button>
  <button onclick="requirePremium('Saving invoices')">Save</button>
</div>

<p style="text-align:center;color:#64748b;font-size:12px">
  Payments powered by PayPal â€¢ Cancel anytime
</p>

</body>
</html>
