<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Invoice Generator - Plans + PayPal</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
/* ---------- Clean, modern styles ---------- */
body{
  font-family:Inter,sans-serif;
  background:#f4f6f8;
  padding:20px;
  color:#1f2937;
}
h1{text-align:center;color:#1e40af}
.section{
  background:#fff;
  padding:20px;
  border-radius:12px;
  margin-bottom:20px;
  box-shadow:0 4px 12px rgba(0,0,0,.06);
}
input,select,textarea,button{
  width:100%;
  padding:8px 10px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid #cbd5e1;
  font-size:14px;
  box-sizing:border-box;
}
button{
  font-weight:600;
  border:none;
  cursor:pointer;
  transition:0.2s;
}
button:hover{opacity:0.9}
.button-group{
  display:flex;
  gap:10px;
  margin-bottom:20px;
}
.button-group button{
  flex:1;
  padding:8px 12px;
  font-size:14px;
}
.row{display:flex;gap:12px;flex-wrap:wrap}
.row>div{flex:1;min-width:180px}
.flex-row{display:flex;gap:12px;}
.flex-column{display:flex;flex-direction:column;gap:10px;}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:8px;border-bottom:1px solid #e5e7eb}
th{background:#e5e7eb}
.badge{
  display:inline-block;
  padding:6px 12px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
}
.grey{background:#e5e7eb;color:#374151}
.blue{background:#3b82f6;color:#fff}
.green{background:#22c55e;color:#fff}
.red{background:#ef4444;color:#fff}
iframe{
  width:100%;
  height:720px;
  border-radius:12px;
  border:1px solid #e5e7eb;
  background:#f9fafb;
}
.remove-btn{
  background:#ef4444;
  padding:4px 8px;
  font-size:12px;
  border-radius:6px;
  cursor:pointer;
}
.remove-btn:hover{background:#b91c1c}
#note{height:80px;resize:vertical}
#dueDate{padding:5px 8px}
.plan-card{
  border:1px solid #cbd5e1;
  border-radius:12px;
  padding:16px;
  flex:1;
  cursor:pointer;
  text-align:center;
  transition:all .2s;
}
.plan-card.selected{
  border-color:#3b82f6;
  box-shadow:0 4px 20px rgba(0,0,0,0.1);
}
.plan-price{
  font-size:20px;
  font-weight:600;
  margin:8px 0;
}
.plan-features{
  margin-top:10px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.feature-btn{
  padding:4px 6px;
  border-radius:6px;
  font-size:12px;
  cursor:not-allowed;
  background:#e5e7eb;
  color:#374151;
}
.feature-btn.unlocked{
  background:#3b82f6;
  color:#fff;
  cursor:pointer;
}
</style>
</head>
<body>

<h1>Smart Invoice Generator</h1>

<h2>Select a Plan</h2>
<div class="row" id="planContainer">
  <div class="plan-card" data-plan="free">
    <h3>Free</h3>
    <div class="plan-price">$0</div>
    <div class="plan-features">
      <div>Max 2 items</div>
      <div>Basic Invoice</div>
      <div>Share manually</div>
    </div>
  </div>
  <div class="plan-card" data-plan="basic">
    <h3>Basic</h3>
    <div class="plan-price">$3/mo</div>
    <div class="plan-features">
      <div>Max 10 items</div>
      <div>Invoice PDF download</div>
      <div>Email notifications</div>
    </div>
  </div>
  <div class="plan-card" data-plan="pro">
    <h3>Pro</h3>
    <div class="plan-price">$13/mo</div>
    <div class="plan-features">
      <div>Unlimited items</div>
      <div>Custom branding</div>
      <div>Automated reminders</div>
    </div>
  </div>
  <div class="plan-card" data-plan="enterprise">
    <h3>Enterprise</h3>
    <div class="plan-price">$30/mo</div>
    <div class="plan-features">
      <div>Team accounts</div>
      <div>Advanced analytics</div>
      <div>Priority support</div>
    </div>
  </div>
</div>

<!-- ---------- PayPal button container ---------- -->
<div class="section">
  <h3>Pay with PayPal (Sandbox)</h3>
  <div id="paypal-button-container"></div>
</div>

<div class="section row" id="invoiceSection">
  <div>
    <label>Document Type</label>
    <select id="docType">
      <option value="INV">Invoice</option>
      <option value="QUO">Quote</option>
      <option value="REC">Receipt</option>
    </select>
  </div>
  <div>
    <label>Invoice Number</label>
    <div style="display:flex;gap:4px;">
      <input id="invoicePrefix" readonly style="width:60px;text-align:center;border-right:none;">
      <input id="invoiceNumber" style="flex:1;" placeholder="0001">
    </div>
  </div>
  <div>
    <label>Status</label>
    <select id="status">
      <option>Draft</option>
      <option>Sent</option>
      <option>Paid</option>
    </select>
  </div>
</div>

<!-- ---------- Your existing invoice form goes here ---------- -->
<div class="button-group">
  <button onclick="updatePreview()">Preview Invoice</button>
  <button id="pdfBtn" class="feature-btn">Download PDF</button>
  <button id="sendBtn" class="feature-btn">Send Invoice</button>
  <button id="saveBtn" class="feature-btn">Save</button>
</div>

<h3>Invoice Preview</h3>
<iframe id="preview"></iframe>

<!-- ---------- PayPal SDK ---------- -->
<script src="https://www.paypal.com/sdk/js?client-id=ASrqoC_iNPodEFNeqORNw&currency=USD"></script>

<script>
// ---------- Plan selection ----------
const planButtons = document.querySelectorAll('.plan-card');
let selectedPlan = 'free';

planButtons.forEach(card=>{
  card.addEventListener('click',()=>{
    selectedPlan = card.getAttribute('data-plan');
    planButtons.forEach(c=>c.classList.remove('selected'));
    card.classList.add('selected');
    updateFeatureAccess();
  });
});

function updateFeatureAccess(){
  const pdfBtn=document.getElementById('pdfBtn');
  const sendBtn=document.getElementById('sendBtn');
  const saveBtn=document.getElementById('saveBtn');
  if(selectedPlan==='free'){
    pdfBtn.classList.remove('unlocked');
    sendBtn.classList.remove('unlocked');
    saveBtn.classList.remove('unlocked');
  } else {
    pdfBtn.classList.add('unlocked');
    sendBtn.classList.add('unlocked');
    saveBtn.classList.add('unlocked');
  }
}

updateFeatureAccess();

// ---------- PayPal Integration ----------
paypal.Buttons({
  createOrder: function(data, actions){
    let amount = 0;
    if(selectedPlan==='basic') amount = 3;
    else if(selectedPlan==='pro') amount = 13;
    else if(selectedPlan==='enterprise') amount = 30;
    return actions.order.create({
      purchase_units:[{amount:{value:amount.toFixed(2)}}]
    });
  },
  onApprove: function(data, actions){
    return actions.order.capture().then(function(details){
      alert('Payment completed by '+details.payer.name.given_name);
      // Unlock plan features after payment
      updateFeatureAccess();
    });
  }
}).render('#paypal-button-container');

// ---------- Existing invoice logic (preview etc.) ----------
const invoicePrefix=document.getElementById("invoicePrefix");
const invoiceNumber=document.getElementById("invoiceNumber");
const docType=document.getElementById("docType");
const preview=document.getElementById("preview");

docType.addEventListener('change',()=>{
  invoicePrefix.value=docType.value;
});

function updatePreview(){
  preview.srcdoc=`<div style="font-family:Inter;padding:32px;background:#fff;border-radius:12px;margin:16px;box-shadow:0 6px 18px rgba(0,0,0,0.08)">
    <h2>${docType.value} ${invoicePrefix.value}${invoiceNumber.value}</h2>
    <p>Invoice preview goes here...</p>
  </div>`;
}

updatePreview();
</script>
</body>
</html>
